<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rent House - Responsive Navbar</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <!-- Tailwind Custom Theme -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ef4444',
            primaryDark: '#dc2626',
            secondary: '#f87171',
            accent: '#fecaca',
            dark: '#1f2937',
          }
        }
      }
    }
  </script>

  <!-- Custom Styles -->
  <style>
    .nav-link {
      position: relative;
      padding: 0.5rem 1rem;
      transition: all 0.3s ease;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: white;
      transition: width 0.3s ease;
    }

    .nav-link:hover::after,
    .nav-link.bg-primaryDark::after {
      width: 100%;
    }

    .mobile-menu {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }

    .mobile-menu.open {
      max-height: 500px;
    }

    .hamburger.open {
      transform: rotate(90deg);
    }
  </style>
</head>

<body>
  <header class="bg-primary text-white shadow-lg sticky top-0 z-50">
    <nav class="container mx-auto px-4 py-3">
      <div class="flex justify-between items-center">
        <!-- Brand Logo -->
        <a href="/" class="flex items-center space-x-2">
          <div class="bg-white p-1 rounded-full">
            <i class="fas fa-home text-primary text-2xl"></i>
          </div>
          <span class="text-xl font-bold tracking-tight">RentHouse</span>
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-1">
          <ul class="flex items-center space-x-1">
            <% if (isLoggedIn) { %>
              <% if (user && user.userType==='guest' ) { %>
                <li>
                  <a href="/index"
                    class="nav-link rounded-lg hover:bg-primaryDark <%= currentPage === 'index' ? 'bg-primaryDark' : '' %>">
                    <i class="fas fa-list mr-1"></i> Home List
                  </a>
                </li>
                <li>
                  <a href="/bookings"
                    class="nav-link rounded-lg hover:bg-primaryDark <%= currentPage === 'bookings' ? 'bg-primaryDark' : '' %>">
                    <i class="fas fa-calendar-check mr-1"></i> Bookings
                  </a>
                </li>
                <li>
                  <a href="/favourite-list"
                    class="nav-link rounded-lg hover:bg-primaryDark <%= currentPage === 'favourite' ? 'bg-primaryDark' : '' %>">
                    <i class="fas fa-heart mr-1"></i> Favourites
                  </a>
                </li>
                <% } else { %>
                  <li>
                    <a href="/host/add-home"
                      class="nav-link rounded-lg hover:bg-primaryDark <%= currentPage === 'addHome' ? 'bg-primaryDark' : '' %>">
                      <i class="fas fa-plus-circle mr-1"></i> Add Home
                    </a>
                  </li>
                  <li>
                    <a href="/host/host-home-list"
                      class="nav-link rounded-lg hover:bg-primaryDark <%= currentPage === 'hostHomeList' ? 'bg-primaryDark' : '' %>">
                      <i class="fas fa-house-user mr-1"></i> Host Homes
                    </a>
                  </li>
                  <% } %>
                    <li class="ml-4">
                      <form action="/logout" method="POST">
                        <button type="submit"
                          class="flex items-center bg-white text-primary py-2 px-4 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                          <i class="fas fa-sign-out-alt mr-2"></i> Logout
                        </button>
                      </form>
                    </li>
                    <% } else { %>
                      <li>
                        <a href="/signUp" class="nav-link rounded-lg hover:bg-primaryDark">
                          <i class="fas fa-user-plus mr-1"></i> Signup
                        </a>
                      </li>
                      <li>
                        <a href="/login" class="nav-link rounded-lg hover:bg-primaryDark">
                          <i class="fas fa-sign-in-alt mr-1"></i> Login
                        </a>
                      </li>
                      <% } %>
          </ul>
        </div>

        <!-- Mobile Toggle Button -->
        <div class="md:hidden">
          <button id="mobile-menu-button"
            class="text-white p-2 rounded-lg hover:bg-primaryDark transition-colors hamburger">
            <i id="menu-icon" class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Navigation -->
      <div id="mobile-menu" class="mobile-menu md:hidden bg-primaryDark rounded-lg mt-2">
        <ul class="py-2">
          <% if (isLoggedIn) { %>
            <% if (user && user.userType==='guest' ) { %>
              <li><a href="/index" class="block py-3 px-4 hover:bg-primary">Home List</a></li>
              <li><a href="/bookings" class="block py-3 px-4 hover:bg-primary">Bookings</a></li>
              <li><a href="/favourite-list" class="block py-3 px-4 hover:bg-primary">Favourites</a></li>
              <% } else { %>
                <li><a href="/host/add-home" class="block py-3 px-4 hover:bg-primary">Add Home</a></li>
                <li><a href="/host/host-home-list" class="block py-3 px-4 hover:bg-primary">Host Homes</a></li>
                <% } %>
                  <li>
                    <form action="/logout" method="POST">
                      <button type="submit" class="w-full text-left py-3 px-4 hover:bg-primary">Logout</button>
                    </form>
                  </li>
                  <% } else { %>
                    <li><a href="/signUp" class="block py-3 px-4 hover:bg-primary">Signup</a></li>
                    <li><a href="/login" class="block py-3 px-4 hover:bg-primary">Login</a></li>
                    <% } %>
        </ul>
      </div>
    </nav>
  </header>

  <script>
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');

    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('open');
      menuIcon.classList.toggle('fa-bars');
      menuIcon.classList.toggle('fa-times');
      mobileMenuButton.classList.toggle('open');
    });

    document.addEventListener('click', (event) => {
      const isClickInsideMenu = mobileMenu.contains(event.target);
      const isClickOnButton = mobileMenuButton.contains(event.target);

      if (!isClickInsideMenu && !isClickOnButton && mobileMenu.classList.contains('open')) {
        mobileMenu.classList.remove('open');
        menuIcon.classList.remove('fa-times');
        menuIcon.classList.add('fa-bars');
        mobileMenuButton.classList.remove('open');
      }
    });
  </script>
</body>

</html>